<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.text.*?>
<?import javafx.scene.shape.Circle?>

<BorderPane fx:id="mainContainer" xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml" 
            fx:controller="Controllers.Front.ReclamationController"
            stylesheets="/styles/theme.css"
            minWidth="900" minHeight="600">
            
    <!-- Header -->
    <top>
        <VBox spacing="0">
            <HBox styleClass="header" alignment="CENTER_LEFT" spacing="20" minHeight="70">
                <padding>
                    <Insets top="15" right="20" bottom="15" left="20"/>
                </padding>
                
                <!-- Logo and App Name -->
                <HBox spacing="10" alignment="CENTER_LEFT" HBox.hgrow="ALWAYS">
                    <StackPane>
                        <Circle radius="20" styleClass="logo-circle"/>
                        <Text text="+" styleClass="logo-text"/>
                    </StackPane>
                    <Label text="MaSantÃ©" styleClass="app-name"/>
                </HBox>

                <!-- Navigation Menu -->
                <HBox spacing="30" alignment="CENTER">
                    <Label text="Accueil" styleClass="nav-item"/>
                    <Label text="RÃ©clamations" styleClass="nav-item, nav-item-active"/>
                    <Label text="Documents" styleClass="nav-item"/>
                    <Label text="Messages" styleClass="nav-item"/>
                </HBox>
                
                <!-- Profile Circle -->
                <Circle radius="15" styleClass="profile-circle"/>
            </HBox>
        </VBox>
    </top>

    <!-- Main Content -->
    <center>
        <StackPane>
            <ScrollPane fx:id="mainScrollPane" fitToWidth="true" styleClass="main-scroll">
                <VBox spacing="30" minHeight="800">
                    <padding>
                        <Insets top="20" right="40" bottom="20" left="40"/>
                    </padding>
                    <Button text="Retour" onAction="#handleRetourHome" styleClass="btn-back"/>
                    <Button text="Messagerie" onAction="#handleGoToMessenger" styleClass="btn-primary"/>
                    <Label text="Gestion des RÃ©clamations" styleClass="main-title"/>
                    <Button text="Nouvelle rÃ©clamation" onAction="#handleScrollToForm" styleClass="btn-primary" maxWidth="220"/>
                    <VBox fx:id="cardContainer" spacing="18" VBox.vgrow="ALWAYS"/>
                    <VBox fx:id="formContainer" spacing="20" styleClass="form-container" visible="false" managed="false">
                        <Label text="Nouvelle RÃ©clamation" styleClass="section-title"/>
                        <VBox spacing="10">
                            <Label text="Sujet" styleClass="field-label"/>
                            <TextField fx:id="sujetField" promptText="Entrez le sujet de votre rÃ©clamation"/>
                        </VBox>
                        <VBox spacing="10">
                            <Label text="Description" styleClass="field-label"/>
                            <TextArea fx:id="descriptionField" promptText="DÃ©crivez votre rÃ©clamation en dÃ©tail" wrapText="true" prefRowCount="3"/>
                        </VBox>
                        <HBox spacing="10">
                            <Button fx:id="ajouterButton" text="Ajouter" onAction="#handleEnvoyerReclamation" styleClass="btn-primary"/>
                            <Button fx:id="modifierButton" text="Modifier" onAction="#handleModifierReclamation" styleClass="btn-success"/>
                            <Button fx:id="supprimerButton" text="Supprimer" onAction="#handleSupprimerReclamation" styleClass="btn-danger"/>
                            <Button fx:id="annulerButton" text="Annuler" onAction="#handleAnnulerForm" styleClass="btn-secondary"/>
                        </HBox>
                    </VBox>
                    <VBox fx:id="reponsesContainer" spacing="10" styleClass="responses-section">
                        <Label text="RÃ©ponses" styleClass="section-title"/>
                        <TableView fx:id="reponsesTableView" prefHeight="200">
                            <columns>
                                <TableColumn fx:id="reponseContenuColumn" text="RÃ©ponse"/>
                                <TableColumn fx:id="reponseDateColumn" text="Date"/>
                            </columns>
                        </TableView>
                    </VBox>
                    <ListView fx:id="notificationsListView" prefHeight="120" prefWidth="600" />
                </VBox>
            </ScrollPane>
            <!-- Bouton Messenger flottant -->
            <Button fx:id="floatingMessengerButton"
                    style="-fx-background-radius: 50%; -fx-background-color: #0084ff; -fx-text-fill: white; -fx-font-size: 22px; -fx-pref-width: 54; -fx-pref-height: 54; -fx-cursor: hand; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 8, 0, 0, 3);"
                    text="ðŸ’¬"
                    StackPane.alignment="BOTTOM_RIGHT"
                    translateY="-32" translateX="-32"/>
            <!-- Conteneur pour les mini-messageries -->
            <StackPane fx:id="miniMessengersContainer" pickOnBounds="false" style="-fx-background-color: transparent;"
                      visible="true" managed="true" mouseTransparent="true"/>
        </StackPane>
    </center>
    
    <!-- Barre latÃ©rale -->
    <!--
    <left>
        <VBox>
            <Label text="Menu Principal"/>
            <Button text="Tableau de bord"/>
            <Button text="RÃ©clamations"/>
            <Button text="RÃ©ponses"/>
            <Button text="Messagerie"/>
            <Button text="Statistiques"/>
            <Button text="DÃ©connexion"/>
        </VBox>
    </left>
    -->
    <!-- Fin barre latÃ©rale -->
</BorderPane>
